<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Bugs</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <style>
* {
	box-sizing: border-box;
}

h1 {
	text-align: center;
	margin-top: -40px;
	margin-bottom: 15px;
}

h2 {
	text-align: center;
	margin-top: 20px;
}

form {
	width: 40%;
	margin: 30px auto;
}

#bugId {
	padding: 0 50px;
	margin-right: 10px;
}

.bugLabel {
	font-size: 20px;
	margin-right: -90px;
}

table {
	margin-top: 50px;
}

footer {
    position:relative;
	bottom: 0;
	left:50%;
	transform:translateX(-50%);
	height: 100px;
}
</style>
</head>
<body class="jumbotron" onload="getBugs()">
    <h1>
        BUG TRACKING SYSTEM
    </h1>
    <nav class="navbar navbar-expand-md bg-dark navbar-dark">
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="collapsibleNavbar">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="index.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="aboutUs.html">About Us</a>
                </li>
            </ul>
        </div>
    </nav>
    <table class="table table-striped">
        <thead>
            <th>Id</th>
            <th>Name</th>
            <th>Priority</th>
            <th>Type</th>
            <th>Build Version</th>
            <th>Synopsis</th>
            <th>Status</th>
        </thead>
        <tbody id="resultTable">
        </tbody>
    </table>
    </div>
	<!-- Footer -->
	<footer class="page-footer font-small blue">

		<!-- Copyright -->
		<div class="footer-copyright text-center py-3">
			Â© 2021 Copyright: <a href="http://localhost:8082/index.html">Bug Tracking
				System </a>
		</div>
		<!-- Copyright -->

	</footer>
	<!-- Footer -->
</body>
<script>
    function getBugs(){
		const promise = fetch('/bug');
		promise.then(function(response){
			return response.json();
		})
		.then(function(bugs){
			const table = document.getElementById('resultTable');
			for(let i=0;i<bugs.length;i++){
				const currentBug = bugs[i];
				const row = document.createElement('tr');
				const idColumn = document.createElement('td');
                const nameColumn = document.createElement('td');
				const priorityColumn = document.createElement('td');
				const typeColumn = document.createElement('td');
				const buildVersionColumn = document.createElement('td');
				const synopsisColumn = document.createElement('td');
				const statusColumn = document.createElement('td');
				idColumn.append(currentBug.id);
				nameColumn.append(currentBug.name);
                priorityColumn.append(currentBug.priority);
                typeColumn.append(currentBug.type);
                buildVersionColumn.append(currentBug.buildVersion);
                synopsisColumn.append(currentBug.synopsis);
                statusColumn.append(currentBug.status);
				row.appendChild(idColumn);
				row.appendChild(nameColumn);
				row.appendChild(priorityColumn);
				row.appendChild(typeColumn);
				row.appendChild(buildVersionColumn);
				row.appendChild(synopsisColumn);
				row.appendChild(statusColumn);
				table.appendChild(row);
			}
        })
    }
</script>
</html>